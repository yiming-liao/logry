"use strict";(self.webpackChunklogry_doc=self.webpackChunklogry_doc||[]).push([[8017],{7944:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"modules/formatter","title":"Formatter","description":"The Formatter layer is responsible for converting the normalized parts of a log into final output strings \u2014 styled, readable, and optionally color-coded.","source":"@site/docs/modules/formatter.md","sourceDirName":"modules","slug":"/modules/formatter","permalink":"/logry/docs/modules/formatter","draft":false,"unlisted":false,"editUrl":"https://github.com/yiming-liao/logry/edit/main/website/docs/modules/formatter.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Normalizer","permalink":"/logry/docs/modules/normalizer"},"next":{"title":"Transporter","permalink":"/logry/docs/modules/transporter"}}');var s=t(4848),o=t(8453);const i={sidebar_position:2},l="Formatter",d={},a=[{value:"What it does",id:"what-it-does",level:3},{value:"Customization",id:"customization",level:3},{value:"Platform Awareness",id:"platform-awareness",level:3}];function c(e){const r={blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"formatter",children:"Formatter"})}),"\n",(0,s.jsx)(r.p,{children:"The Formatter layer is responsible for converting the normalized parts of a log into final output strings \u2014 styled, readable, and optionally color-coded."}),"\n",(0,s.jsx)(r.h3,{id:"what-it-does",children:"What it does"}),"\n",(0,s.jsxs)(r.p,{children:["The Formatter receives normalized data and produces formatted strings (or structured content) ready for display.",(0,s.jsx)(r.br,{}),"\n","Handled parts include:"]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"timestamp"}),"\n",(0,s.jsx)(r.li,{children:"id"}),"\n",(0,s.jsx)(r.li,{children:"level"}),"\n",(0,s.jsx)(r.li,{children:"scope"}),"\n",(0,s.jsx)(r.li,{children:"message"}),"\n",(0,s.jsx)(r.li,{children:"meta"}),"\n",(0,s.jsx)(r.li,{children:"context"}),"\n",(0,s.jsxs)(r.li,{children:["pid (",(0,s.jsx)(r.em,{children:"Node.js only"}),")"]}),"\n",(0,s.jsxs)(r.li,{children:["hostname (",(0,s.jsx)(r.em,{children:"Node.js only"}),")"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"Each part has its own formatter. All formatters support optional style customizations and can be overridden with custom logic."}),"\n",(0,s.jsx)(r.h3,{id:"customization",children:"Customization"}),"\n",(0,s.jsx)(r.p,{children:"Every formatter supports a customFormatter function, letting you override default behavior:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typescript",children:"customFormatter?: ({ part, rawPart }) => FormattedValue; // rawPart is not normalized\n"})}),"\n",(0,s.jsx)(r.p,{children:"You can also fine-tune behavior using extra options per part."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Platform"}),(0,s.jsx)(r.th,{children:"Part"}),(0,s.jsx)(r.th,{children:"Extra Options Available"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Node.js"})}),(0,s.jsx)(r.td,{children:"ALL"}),(0,s.jsx)(r.td,{children:"ansiColor"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"-"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"scope"})}),(0,s.jsx)(r.td,{children:"showOnlyLatest, seperator"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"-"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"meta"})}),(0,s.jsxs)(r.td,{children:["format, depth (for format: ",(0,s.jsx)(r.strong,{children:'"raw"'}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"-"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"context"})}),(0,s.jsxs)(r.td,{children:["format, depth (for format: ",(0,s.jsx)(r.strong,{children:'"raw"'}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Browser"})}),(0,s.jsx)(r.td,{children:"ALL"}),(0,s.jsx)(r.td,{children:"cssStyle"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"-"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"scope"})}),(0,s.jsx)(r.td,{children:"showOnlyLatest, seperator"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"-"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"meta"})}),(0,s.jsx)(r.td,{children:"format"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"-"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"context"})}),(0,s.jsx)(r.td,{children:"format"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"platform-awareness",children:"Platform Awareness"}),"\n",(0,s.jsxs)(r.p,{children:["Formatter adapts to the runtime platform \u2014 Node.js or Browser \u2014 adjusting output format and styling accordingly.",(0,s.jsx)(r.br,{}),"\n","This ensures logs stay readable and well-styled in both environments."]}),"\n",(0,s.jsx)(r.p,{children:"The output behavior varies depending on the platform:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Platform"}),(0,s.jsx)(r.th,{children:"Format output"}),(0,s.jsx)(r.th,{children:"Styling mechanism"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Node.js"})}),(0,s.jsx)(r.td,{children:"Returns a plain string with ANSI codes"}),(0,s.jsx)(r.td,{children:"Uses ANSI escape codes"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Browser"})}),(0,s.jsxs)(r.td,{children:["Returns ",(0,s.jsx)(r.code,{children:"{ [label]: string, cssStyle: string }"})]}),(0,s.jsx)(r.td,{children:"Uses %c and inline CSS"})]})]})]}),"\n",(0,s.jsx)(r.p,{children:'In the browser, the final result will be used with console.log("%c...%c...%c...", styleA, styleB, ...), allowing for per-part CSS styling.'}),"\n",(0,s.jsx)(r.p,{children:"For example:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Node.js prints timestamps as full ISO strings with ANSI colors (e.g., \\x1b[33m)."}),"\n",(0,s.jsx)(r.li,{children:"Browser styles timestamps with CSS (e.g., orange and bold) and simpler format."}),"\n",(0,s.jsx)(r.li,{children:"Meta shows full depth in Node, but gets a prefix like \u201cMETA | \u201c in Browser."}),"\n",(0,s.jsx)(r.li,{children:"Some parts (like level) can be hidden in one platform but shown in another."}),"\n"]}),"\n",(0,s.jsxs)(r.blockquote,{children:["\n",(0,s.jsxs)(r.p,{children:["You can define environment-specific behavior using the formatterConfig structure.",(0,s.jsx)(r.br,{}),"\n","It can be set globally in ",(0,s.jsx)(r.strong,{children:"logry(...)"}),", scoped to a ",(0,s.jsx)(r.strong,{children:"logger.child(...)"}),", or ",(0,s.jsx)(r.strong,{children:"overridden per log method"}),":"]}),"\n"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-typeScript",children:'formatterConfig: {\n  node: {\n    timestamp: {\n      ansiColor: "\\x1b[33m",\n    },\n    meta: {\n      depth: null,\n    },\n    level: {\n      lineBreaks: 1,\n    },\n    id: {\n      customFormatter: ({ part }) => `node-${part}`,\n    },\n  },\n  browser: {\n    timestamp: {\n      cssStyle: "font-weight: bold; color: orange;",\n    },\n    meta: {\n      prefix: "META | ",\n    },\n    level: {\n      hide: true,\n    },\n  },\n},\n'})})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>l});var n=t(6540);const s={},o=n.createContext(s);function i(e){const r=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);